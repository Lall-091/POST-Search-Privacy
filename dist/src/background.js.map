{"version":3,"sources":["background.js"],"names":["chrome","webRequest","onBeforeRequest","addListener","details","tabs","update","tabId","url","runtime","getURL","qel","URL","searchParams","has","qval","getAll","qwant","onUpdated","handler","changeInfo","status","removeListener","sendMessage","data","cancel","urls"],"mappings":";AAAAA,OAAOC,WAAWC,gBAAgBC,YACjC,SAAUC,GACTJ,OAAOK,KAAKC,OAAOF,EAAQG,MAAO,CACjCC,IAAKR,OAAOS,QAAQC,OAAO,qBAGxBF,IACAG,EADAH,EAAM,IAAII,IAAIR,EAAQI,KAEtBA,EAAIK,aAAaC,IAAI,OACxBH,EAAM,KACHH,EAAIK,aAAaC,IAAI,WACxBH,EAAM,SACHI,IAAAA,EAAOP,EAAIK,aAAaG,OAAOL,GAC/BM,EAAQ,EACRT,EAAIK,aAAaC,IAAI,OACxBG,EAAQ,GAkBF,OANPjB,OAAOK,KAAKa,UAAUf,YAXR,SAAVgB,EAAoBZ,EAAOa,GAC1Bb,IAAUH,EAAQG,OAA+B,aAAtBa,EAAWC,SACzCrB,OAAOK,KAAKa,UAAUI,eAAeH,GACrCnB,OAAOK,KAAKkB,YAAYhB,EAAO,CAC9BiB,KAAMT,EACNJ,IAAKA,EACLH,IAAKA,EACLS,MAAOA,OAKVjB,OAAOK,KAAKkB,YAAYnB,EAAQG,MAAO,CACtCiB,KAAMT,EACNJ,IAAKA,EACLH,IAAKA,IAEC,CAAEiB,QAAQ,IAElB,CACCC,KAAM,CAAA,+BAGL,qCACA,8BACA,oCALK,8CAQL,0CACA,+CACA,2CACA,0CACA,sCACA,2CACA,uCAdK,6BAiBL,yBACA,8BACA,4BAGF,CAAC","file":"background.js","sourceRoot":"../../src","sourcesContent":["chrome.webRequest.onBeforeRequest.addListener(\n\tfunction (details) {\n\t\tchrome.tabs.update(details.tabId, {\n\t\t\turl: chrome.runtime.getURL(\"src/search.html\"),\n\t\t})\n\t\t\n\t\tvar url = new URL(details.url)\n\t\tlet qel\n\t\tif (url.searchParams.has('q'))\n\t\t\tqel = 'q'\n\t\tif (url.searchParams.has('query'))\n\t\t\tqel = 'query'\n\t\tlet qval = url.searchParams.getAll(qel)\n\t\tlet qwant = 0\n\t\tif (url.searchParams.has('t'))\n\t\t\tqwant = 1\n\t\tlet handler = function (tabId, changeInfo) {\n\t\t\tif (tabId === details.tabId && changeInfo.status === \"complete\") {\n\t\t\t\tchrome.tabs.onUpdated.removeListener(handler)\n\t\t\t\tchrome.tabs.sendMessage(tabId, {\n\t\t\t\t\tdata: qval,\n\t\t\t\t\tqel: qel,\n\t\t\t\t\turl: url,\n\t\t\t\t\tqwant: qwant\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tchrome.tabs.onUpdated.addListener(handler)\n\t\tchrome.tabs.sendMessage(details.tabId, {\n\t\t\tdata: qval,\n\t\t\tqel: qel,\n\t\t\turl: url\n\t\t})\n\t\treturn { cancel: true }\n\t},\n\t{\n\t\turls: [\n\t\t\t// duckduckgo\n\t\t\t\"https://duckduckgo.com/?*q=*\",\n\t\t\t\"https://start.duckduckgo.com/?*q=*\",\n\t\t\t\"http://duckduckgo.com/?*q=*\",\n\t\t\t\"http://start.duckduckgo.com/?*q=*\",\n\t\t\t// startpage\n\t\t\t\"http://www.startpage.com/sp/search?*query=*\",\n\t\t\t\"http://startpage.com/sp/search?*query=*\",\n\t\t\t\"https://www.startpage.com/sp/search?*query=*\",\n\t\t\t\"https://startpage.com/sp/search?*query=*\",\n\t\t\t\"http://www.startpage.com/do/search?*q=*\",\n\t\t\t\"http://startpage.com/do/search?*q=*\",\n\t\t\t\"https://www.startpage.com/do/search?*q=*\",\n\t\t\t\"https://startpage.com/do/search?*q=*\",\n\t\t\t// qwant\n\t\t\t\"http://www.qwant.com/?*q=*\",\n\t\t\t\"http://qwant.com/?*q=*\",\n\t\t\t\"https://www.qwant.com/?*q=*\",\n\t\t\t\"https://qwant.com/?*q=*\"\n\t\t],\n\t},\n\t[\"blocking\"]\n)\n"]}