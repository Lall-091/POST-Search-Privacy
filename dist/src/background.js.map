{"version":3,"sources":["background.js"],"names":["chrome","webRequest","onBeforeRequest","addListener","details","tabs","update","tabId","url","runtime","getURL","qel","URL","searchParams","has","qval","getAll","onUpdated","handler","changeInfo","status","removeListener","sendMessage","data","cancel","urls"],"mappings":";AAAAA,OAAOC,WAAWC,gBAAgBC,YACjC,SAAUC,GACTJ,OAAOK,KAAKC,OAAOF,EAAQG,MAAO,CACjCC,IAAKR,OAAOS,QAAQC,OAAO,qBAGxBF,IACAG,EADAH,EAAM,IAAII,IAAIR,EAAQI,KAEtBA,EAAIK,aAAaC,IAAI,OACxBH,EAAM,KACHH,EAAIK,aAAaC,IAAI,WACxBH,EAAM,SACHI,IAAAA,EAAOP,EAAIK,aAAaG,OAAOL,GAiB5B,OANPX,OAAOK,KAAKY,UAAUd,YAVR,SAAVe,EAAoBX,EAAOY,GAC1BZ,IAAUH,EAAQG,OAA+B,aAAtBY,EAAWC,SACzCpB,OAAOK,KAAKY,UAAUI,eAAeH,GACrClB,OAAOK,KAAKiB,YAAYf,EAAO,CAC9BgB,KAAMR,EACNJ,IAAKA,EACLH,IAAKA,OAKRR,OAAOK,KAAKiB,YAAYlB,EAAQG,MAAO,CACtCgB,KAAMR,EACNJ,IAAKA,EACLH,IAAKA,IAEC,CAAEgB,QAAQ,IAElB,CACCC,KAAM,CACL,+BACA,qCACA,8BACA,oCACA,8CACA,0CACA,+CACA,2CACA,0CACA,sCACA,2CACA,yCAGF,CAAC","file":"background.js","sourceRoot":"../../src","sourcesContent":["chrome.webRequest.onBeforeRequest.addListener(\n\tfunction (details) {\n\t\tchrome.tabs.update(details.tabId, {\n\t\t\turl: chrome.runtime.getURL(\"src/search.html\"),\n\t\t})\n\t\t\n\t\tvar url = new URL(details.url)\n\t\tlet qel\n\t\tif (url.searchParams.has('q'))\n\t\t\tqel = 'q'\n\t\tif (url.searchParams.has('query'))\n\t\t\tqel = 'query'\n\t\tlet qval = url.searchParams.getAll(qel)\n\t\tlet handler = function (tabId, changeInfo) {\n\t\t\tif (tabId === details.tabId && changeInfo.status === \"complete\") {\n\t\t\t\tchrome.tabs.onUpdated.removeListener(handler)\n\t\t\t\tchrome.tabs.sendMessage(tabId, {\n\t\t\t\t\tdata: qval,\n\t\t\t\t\tqel: qel,\n\t\t\t\t\turl: url\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tchrome.tabs.onUpdated.addListener(handler)\n\t\tchrome.tabs.sendMessage(details.tabId, {\n\t\t\tdata: qval,\n\t\t\tqel: qel,\n\t\t\turl: url\n\t\t})\n\t\treturn { cancel: true }\n\t},\n\t{\n\t\turls: [\n\t\t\t\"https://duckduckgo.com/?*q=*\",\n\t\t\t\"https://start.duckduckgo.com/?*q=*\",\n\t\t\t\"http://duckduckgo.com/?*q=*\",\n\t\t\t\"http://start.duckduckgo.com/?*q=*\",\n\t\t\t\"http://www.startpage.com/sp/search?*query=*\",\n\t\t\t\"http://startpage.com/sp/search?*query=*\",\n\t\t\t\"https://www.startpage.com/sp/search?*query=*\",\n\t\t\t\"https://startpage.com/sp/search?*query=*\",\n\t\t\t\"http://www.startpage.com/do/search?*q=*\",\n\t\t\t\"http://startpage.com/do/search?*q=*\",\n\t\t\t\"https://www.startpage.com/do/search?*q=*\",\n\t\t\t\"https://startpage.com/do/search?*q=*\"\n\t\t],\n\t},\n\t[\"blocking\"]\n)\n"]}